<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Java多线程</title>
    <url>/2020/02/13/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="实现多线程"><a href="#实现多线程" class="headerlink" title="实现多线程"></a>实现多线程</h2><p>通过继承Thread类或者实现Runnable，Callable接口</p>
<h3 id="继承Thread类"><a href="#继承Thread类" class="headerlink" title="继承Thread类"></a>继承Thread类</h3><p>构造方法：Thread()，Thread(String threadname)，</p>
<p>​                    Thread(Runnable target)，Thread(Runnable target，String threadname)</p>
<p>重写run()方法：包含线程运行逻辑</p>
<p>start()方法：开启多线程</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">aThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"这是run方法。。。"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            System.out.println(i+<span class="number">1</span>+<span class="string">"只狼"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    Thread tt=<span class="keyword">new</span> aThread();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    tt.start();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(<span class="string">"这是主程序  。。。"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(i+<span class="number">1</span>+<span class="string">"只饺子"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="实现Runnable接口"><a href="#实现Runnable接口" class="headerlink" title="实现Runnable接口"></a>实现Runnable接口</h3><p>重写run()方法，同上</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Thread tr=<span class="keyword">new</span> Thread(<span class="keyword">new</span> bThread());</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//Thread tr=new Thread(new bThread(),"trname");</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//加上线程名称，可以在run方法中通过Thread.cunrrentThread.getName()获取</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">tr.start();</span></pre></td></tr></table></figure>

<p>实现Runnable接口可以资源共享</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">bThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> count;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"这是实现Runnable接口的run方法。。。"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            count++;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            System.out.println(Thread.currentThread().getName()+count+<span class="string">"只狗"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//主程序</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">Runnable run=<span class="keyword">new</span> bThread();</span></pre></td></tr><tr><td class="code"><pre><span class="line">Thread tr1=<span class="keyword">new</span> Thread(run,<span class="string">"线程11111："</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">tr1.start();</span></pre></td></tr><tr><td class="code"><pre><span class="line">Thread tr2=<span class="keyword">new</span> Thread(run,<span class="string">"线程22222："</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">tr2.start();</span></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/2020/02/13/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/th_runnable.png" alt></p>
<p>两个线程共享同一个runnable实现类的count值，各自执行，不影响对方</p>
<h2 id="Thread类的方法"><a href="#Thread类的方法" class="headerlink" title="Thread类的方法"></a>Thread类的方法</h2><p>启动线程start()，线程逻辑run()，设置线程名setName(String name)，获取线程名getName()，返回当前线程currentThread()</p>
]]></content>
      <categories>
        <category>Java基础</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>阿里云ECS服务器体验</title>
    <url>/2020/02/12/%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%93%E9%AA%8C/</url>
    <content><![CDATA[<h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>配置：2核4G内存1Mbps带宽</p>
<p>系统：CentOS7.7</p>
<h2 id="服务器设置"><a href="#服务器设置" class="headerlink" title="服务器设置"></a>服务器设置</h2><p>重置密码，修改主机名、实例名，设置安全组(80，443，3306等)</p>
<p>Xshell连接服务器</p>
<a id="more"></a>

<h3 id="宝塔面板安装-开放8888端口"><a href="#宝塔面板安装-开放8888端口" class="headerlink" title="宝塔面板安装(开放8888端口)"></a>宝塔面板安装(开放8888端口)</h3><p>用来管控还是挺好的</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http:&#x2F;&#x2F;download.bt.cn&#x2F;install&#x2F;install_6.0.sh &amp;&amp; sh install.sh</span></pre></td></tr></table></figure>

<p>傻瓜式选择LNMP(Linux，Nginx1.16，MySQL5.6，PHP5.6)一键安装</p>
<h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><h3 id="安装docker-ce"><a href="#安装docker-ce" class="headerlink" title="安装docker-ce"></a>安装docker-ce</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置仓库</span></pre></td></tr><tr><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span></pre></td></tr><tr><td class="code"><pre><span class="line">配置镜像源</span></pre></td></tr><tr><td class="code"><pre><span class="line">yum-config-manager --add-repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span></pre></td></tr><tr><td class="code"><pre><span class="line">安装docker-ce</span></pre></td></tr><tr><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io</span></pre></td></tr><tr><td class="code"><pre><span class="line">启动</span></pre></td></tr><tr><td class="code"><pre><span class="line">systemctl start docker</span></pre></td></tr><tr><td class="code"><pre><span class="line">查看版本</span></pre></td></tr><tr><td class="code"><pre><span class="line">docker version</span></pre></td></tr></table></figure>

<h3 id="1）、镜像操作"><a href="#1）、镜像操作" class="headerlink" title="1）、镜像操作"></a>1）、镜像操作</h3><table>
<thead>
<tr>
<th>操作</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>检索</td>
<td>docker  search 关键字  eg：docker  search redis</td>
<td>我们经常去docker  hub上检索镜像的详细信息，如镜像的TAG。</td>
</tr>
<tr>
<td>拉取</td>
<td>docker pull 镜像名:tag</td>
<td>:tag是可选的，tag表示标签，多为软件的版本，默认是latest</td>
</tr>
<tr>
<td>列表</td>
<td>docker images</td>
<td>查看所有本地镜像</td>
</tr>
<tr>
<td>删除</td>
<td>docker rmi image-id</td>
<td>删除指定的本地镜像</td>
</tr>
</tbody></table>
<p><a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></p>
<h3 id="2）、容器操作"><a href="#2）、容器操作" class="headerlink" title="2）、容器操作"></a>2）、容器操作</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1、搜索镜像</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker search tomcat</span></pre></td></tr><tr><td class="code"><pre><span class="line">2、拉取镜像</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker pull tomcat</span></pre></td></tr><tr><td class="code"><pre><span class="line">3、根据镜像启动容器</span></pre></td></tr><tr><td class="code"><pre><span class="line">docker run --name mytomcat -d tomcat:latest</span></pre></td></tr><tr><td class="code"><pre><span class="line">4、docker ps  </span></pre></td></tr><tr><td class="code"><pre><span class="line">查看运行中的容器</span></pre></td></tr><tr><td class="code"><pre><span class="line">5、 停止运行中的容器</span></pre></td></tr><tr><td class="code"><pre><span class="line">docker stop  容器的id</span></pre></td></tr><tr><td class="code"><pre><span class="line">6、查看所有的容器</span></pre></td></tr><tr><td class="code"><pre><span class="line">docker ps -a</span></pre></td></tr><tr><td class="code"><pre><span class="line">7、启动容器</span></pre></td></tr><tr><td class="code"><pre><span class="line">docker start 容器id</span></pre></td></tr><tr><td class="code"><pre><span class="line">8、删除一个容器</span></pre></td></tr><tr><td class="code"><pre><span class="line"> docker rm 容器id</span></pre></td></tr><tr><td class="code"><pre><span class="line">9、启动一个做了端口映射的tomcat</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d -p 8888:8080 tomcat</span></pre></td></tr><tr><td class="code"><pre><span class="line">-d：后台运行</span></pre></td></tr><tr><td class="code"><pre><span class="line">-p: 将主机的端口映射到容器的一个端口    主机端口:容器内部的端口</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">10、为了演示简单关闭了linux的防火墙</span></pre></td></tr><tr><td class="code"><pre><span class="line">service firewalld status ；查看防火墙状态</span></pre></td></tr><tr><td class="code"><pre><span class="line">service firewalld stop：关闭防火墙</span></pre></td></tr><tr><td class="code"><pre><span class="line">11、查看容器的日志</span></pre></td></tr><tr><td class="code"><pre><span class="line">docker logs container-name/container-id</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">更多命令参看</span></pre></td></tr><tr><td class="code"><pre><span class="line">https://docs.docker.com/engine/reference/commandline/docker/</span></pre></td></tr><tr><td class="code"><pre><span class="line">可以参考每一个镜像的文档</span></pre></td></tr></table></figure>

<h3 id="3）、安装MySQL示例"><a href="#3）、安装MySQL示例" class="headerlink" title="3）、安装MySQL示例"></a>3）、安装MySQL示例</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql</span></pre></td></tr></table></figure>

<p>错误的启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker run --name mysql01 -d mysql</span></pre></td></tr><tr><td class="code"><pre><span class="line">42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">mysql退出了</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span></pre></td></tr><tr><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES</span></pre></td></tr><tr><td class="code"><pre><span class="line">42f09819908b        mysql               "docker-entrypoint.sh"   34 seconds ago      Exited (1) 33 seconds ago                            mysql01</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">//错误日志</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker logs 42f09819908b</span></pre></td></tr><tr><td class="code"><pre><span class="line">error: database is uninitialized and password option is not specified </span></pre></td></tr><tr><td class="code"><pre><span class="line">  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORD；这个三个参数必须指定一个</span></pre></td></tr></table></figure>

<p>正确的启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span></pre></td></tr><tr><td class="code"><pre><span class="line">b874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker ps</span></pre></td></tr><tr><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span></pre></td></tr><tr><td class="code"><pre><span class="line">b874c56bec49        mysql               "docker-entrypoint.sh"   4 seconds ago       Up 3 seconds        3306/tcp            mysql01</span></pre></td></tr></table></figure>

<p>做了端口映射</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span></pre></td></tr><tr><td class="code"><pre><span class="line">ad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434</span></pre></td></tr><tr><td class="code"><pre><span class="line">[root@localhost ~]# docker ps</span></pre></td></tr><tr><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span></pre></td></tr><tr><td class="code"><pre><span class="line">ad10e4bc5c6a        mysql               "docker-entrypoint.sh"   4 seconds ago       Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp   mysql02</span></pre></td></tr></table></figure>

<p>几个其他的高级操作</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run --name mysql03 -v &#x2F;conf&#x2F;mysql:&#x2F;etc&#x2F;mysql&#x2F;conf.d -e MYSQL_ROOT_PASSWORD&#x3D;my-secret-pw -d mysql:tag</span></pre></td></tr><tr><td class="code"><pre><span class="line">把主机的&#x2F;conf&#x2F;mysql文件夹挂载到 mysqldocker容器的&#x2F;etc&#x2F;mysql&#x2F;conf.d文件夹里面</span></pre></td></tr><tr><td class="code"><pre><span class="line">改mysql的配置文件就只需要把mysql配置文件放在自定义的文件夹下（&#x2F;conf&#x2F;mysql）</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD&#x3D;my-secret-pw -d mysql:tag --character-set-server&#x3D;utf8mb4 --collation-server&#x3D;utf8mb4_unicode_ci</span></pre></td></tr><tr><td class="code"><pre><span class="line">指定mysql的一些配置参数</span></pre></td></tr></table></figure>

<h3 id="redis-in-docker"><a href="#redis-in-docker" class="headerlink" title="redis in docker"></a>redis in docker</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run --name 名字 -p 6379:6379 -d redis --requirepass &quot;密码&quot;</span></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>服务器相关</category>
      </categories>
      <tags>
        <tag>Aliyun</tag>
        <tag>docker</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Java IO流</title>
    <url>/2020/02/10/Java-IO%E6%B5%81/</url>
    <content><![CDATA[<h3 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h3><p>文件流(基于硬盘，速度慢，名字里带File)，缓冲流(走内存，速度快，名字里带Buffer)</p>
<p>字节流/字符流：In(Out)putStream，Reader/Writer</p>
<p>转换流：InputStreamReader/OutputStreamWriter</p>
<p>标准输入输出流</p>
<p>打印流：PrintSream，PrintWriter</p>
<p>数据流：DataInputStream，DataOutputStream</p>
<p>对象流：ObjectInputStream，ObjectOutputStream   –涉及序列化/反序列化</p>
<p>随机存取文件流：RandomAccessFile(随机意思是人为可操控，而不是电脑随机)</p>
<a id="more"></a>

<h3 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h3><h4 id="能新建，删除，重命名文件或目录，不能访问文件本身，常用方法如下"><a href="#能新建，删除，重命名文件或目录，不能访问文件本身，常用方法如下" class="headerlink" title="能新建，删除，重命名文件或目录，不能访问文件本身，常用方法如下"></a>能新建，删除，重命名文件或目录，不能访问文件本身，常用方法如下</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//构造方法</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">File newfile=<span class="keyword">new</span> File(<span class="string">"/testfprder/test.txt"</span>);			<span class="comment">//相对路径(文件)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">File newfile3=<span class="keyword">new</span> File(<span class="string">"/testfprder/aforder"</span>);			<span class="comment">//相对路径(目录)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">File newfile2=<span class="keyword">new</span> File(<span class="string">"/testfprder/"</span>,<span class="string">"test.txt"</span>);		<span class="comment">//父路径+文件名</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//获取信息</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.getName()				<span class="comment">//获取文件或目录名</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.getPath()				<span class="comment">//获取new的时候的路径</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.getAbsolutePath()		<span class="comment">//获取绝对路径</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.getAbsoluteFile()		<span class="comment">//返回一个用绝对路径new的File对象</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.getParent()				<span class="comment">//返回父级路径</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.renameTo(<span class="keyword">new</span> File())	<span class="comment">//重命名</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.exists()				<span class="comment">//判断文件是否存在</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.canRead()				<span class="comment">//是否可读(对应canWrite()是否可写)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.isFile()				<span class="comment">//是否是文件(对应有isDerectory()是否是目录)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.lastModified()			<span class="comment">//最后修改事件</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.length()				<span class="comment">//文件长度</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//增删查</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.createNewFile()			<span class="comment">//创建文件，需捕获异常</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.delete()				<span class="comment">//删除文件</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.mkdir()					<span class="comment">//创建目录(直接mkdirs()创建多层目录)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.list()				<span class="comment">//列出所有目录下的文件/子目录(返回String[]类型)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">newfile.listFiles()				<span class="comment">//同上，返回File[]类型数组</span></span></pre></td></tr></table></figure>

<h4 id="递归遍历文件目录"><a href="#递归遍历文件目录" class="headerlink" title="递归遍历文件目录"></a>递归遍历文件目录</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">listAll</span><span class="params">(File file)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">if</span>(file.isFile())&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(file.getAbsolutePath()+<span class="string">"是文件"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;<span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(file.getAbsolutePath()+<span class="string">"是目录"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        File[] fs=file.listFiles();</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(fs!=<span class="keyword">null</span>&amp;&amp;fs.length&gt;<span class="number">0</span>)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">for</span>(File f:fs)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                listAll(f);</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p><img src="/2020/02/10/Java-IO%E6%B5%81/file_listall.png" alt></p>
<h3 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h3><h4 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h4><h5 id="InputStream"><a href="#InputStream" class="headerlink" title="InputStream"></a>InputStream</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"testforder/test.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">byte</span>[] bt=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>];				<span class="comment">//每次8个字节</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> len;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">while</span> ((len=fis.read(bt))!=-<span class="number">1</span>)&#123;		<span class="comment">//直到最后一个字节</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="keyword">new</span> String(bt,<span class="number">0</span>,len));</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"len："</span>+len);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(<span class="string">"----------------------------"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(<span class="keyword">new</span> String(bt));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    fis.close();</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    e.printStackTrace();</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p><img src="/2020/02/10/Java-IO%E6%B5%81/io_fis.png" alt></p>
<h5 id="OutputStream"><a href="#OutputStream" class="headerlink" title="OutputStream"></a>OutputStream</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"testforder/good.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    String str=<span class="string">"talk is cheap,show me your code"</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    fos.write(str.getBytes());		<span class="comment">//写到内存</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    fos.flush();					<span class="comment">//刷新，将内存写入硬盘</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    fos.close();</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    e.printStackTrace();</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p><img src="/2020/02/10/Java-IO%E6%B5%81/io_fos.png" alt></p>
<h5 id="字节流复制文件"><a href="#字节流复制文件" class="headerlink" title="字节流复制文件"></a>字节流复制文件</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fileCopy</span><span class="params">(String inpath,String outPath)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(inpath);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(outPath);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">byte</span>[] bt=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">int</span> len;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">while</span> ((len=fis.read(bt))!=-<span class="number">1</span>)&#123;		<span class="comment">//读取文件</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            fos.write(bt,<span class="number">0</span>,len);			<span class="comment">//写入内存</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        fos.flush();						<span class="comment">//刷新</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        fos.close();						<span class="comment">//关闭流</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        fis.close();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        e.printStackTrace();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//调用方法，传入参数</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">fileCopy(<span class="string">"testforder/good.txt"</span>,<span class="string">"testforder/aforder/good.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">fileCopy(<span class="string">"testforder/beautiful.jpg"</span>,<span class="string">"testforder/aforder/good.jpg"</span>);</span></pre></td></tr></table></figure>

<p><img src="/2020/02/10/Java-IO%E6%B5%81/io_fcopy.png" alt></p>
<h4 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h4><p>与字节流差不多，不过针对字符，不像字节流可以操作所有类型文件(图片，压缩包，等等)</p>
<p>FileInputStream对应FileReader，FileOutputStream对应FileWriter</p>
<p>byte[] 字节数组对应char[] 字符数组</p>
<p>其他都一样</p>
<h4 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h4><p>先把数据缓冲到内存中，然后在内存中进行io操作，速度快很多。</p>
<p>将File替换成Buffer即可，并要事先new FileInputStream()对象(输出流同理，注意flush)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//构造方法</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">FileInputStream fis=<span class="keyword">new</span> FileInputStream(<span class="string">"/testforder/test.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">BufferInputStream bis=<span class="keyword">new</span> BufferInputStream(fis);</span></pre></td></tr><tr><td class="code"><pre><span class="line">......</span></pre></td></tr><tr><td class="code"><pre><span class="line">bis.close();</span></pre></td></tr><tr><td class="code"><pre><span class="line">fis.close();</span></pre></td></tr></table></figure>

<h4 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h4><p>字节流与字符流互相转换，当字节流数据都是字符时，转换成字符流，提高效率</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">FileInputStream fis=<span class="keyword">new</span> FileInputStream(<span class="string">"/testforder/test.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">InputStreamReader isr=<span class="keyword">new</span> InputStreamReader(fis,<span class="string">"utf-8"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//接下来isr即可当Reader字符流使用，编码要与读取文件编码一致，记事本默认GBK</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">......</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//一样的操作</span></span></pre></td></tr></table></figure>

<h4 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a>数据流</h4><p>Data替换File，构造方法与缓冲流类似，输出流输出到文件中不能直接辨认，是乱码，需要通过输入流读出来。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">readBoolean(),readInt(),readDouble()</span></pre></td></tr><tr><td class="code"><pre><span class="line">writeBoolean(),wirteInt(),writeDouble()		<span class="comment">//方法一一对应</span></span></pre></td></tr></table></figure>

<h4 id="对象流"><a href="#对象流" class="headerlink" title="对象流"></a>对象流</h4><p>将对象转换成二进制进行网络传输</p>
<p>序列化：将对象写入IO流，</p>
<p>反序列化：从IO流中恢复成对象</p>
<p>需要对象实现Serializable接口(或者Externalizable，用的少)</p>
<p><img src="/2020/02/10/Java-IO%E6%B5%81/io_serializable.png" alt></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//构建对象</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">private</span> String name;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//序列化</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testSerialize</span> <span class="params">(String path)</span> <span class="keyword">throws</span> Exception</span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        ObjectOutputStream oos=<span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(path));</span></pre></td></tr><tr><td class="code"><pre><span class="line">        Person p=<span class="keyword">new</span> Person(<span class="string">"jack"</span>,<span class="number">18</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"序列化："</span>+p);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        oos.writeObject(p);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        oos.flush();</span></pre></td></tr><tr><td class="code"><pre><span class="line">        oos.close();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//反序列化</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testDeserialize</span> <span class="params">(String path)</span> <span class="keyword">throws</span> Exception</span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        ObjectInputStream ois=<span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(path));</span></pre></td></tr><tr><td class="code"><pre><span class="line">        Person p=(Person) ois.readObject();</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"反序列化后："</span>+p);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        ois.close();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">//测试</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            testSerialize(<span class="string">"testforder/aforder/bforder/ohuo.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">            testDeserialize(<span class="string">"testforder/aforder/bforder/ohuo.txt"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            e.printStackTrace();</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<p>运行结果：文本中</p>
<p><img src="/2020/02/10/Java-IO%E6%B5%81/xuliehua.png" alt></p>
<p>控制台</p>
<p><img src="/2020/02/10/Java-IO%E6%B5%81/fanxuliehua.png" alt></p>
<p>注意：序列化和反序列化的类名，包名，结构必须完全一致。</p>
<h4 id="随机存取流"><a href="#随机存取流" class="headerlink" title="随机存取流"></a>随机存取流</h4><p>省略。。。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>头发-1</p>
]]></content>
      <categories>
        <category>Java基础</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>手写简易HashMap</title>
    <url>/2020/02/09/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93HashMap/</url>
    <content><![CDATA[<h3 id="一，关于哈希表-Hash-Table"><a href="#一，关于哈希表-Hash-Table" class="headerlink" title="一，关于哈希表(Hash Table)"></a>一，关于哈希表(Hash Table)</h3><p>定义：<a href="https://baike.baidu.com/item/散列表/10027933" target="_blank" rel="noopener">散列表</a>（Hash table，也叫哈希表），是根据关键码值(Key value)而直接进行访问的<a href="https://baike.baidu.com/item/数据结构/1450" target="_blank" rel="noopener">数据结构</a>。也就是说，它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。这个映射函数叫做<a href="https://baike.baidu.com/item/散列函数/2366288" target="_blank" rel="noopener">散列函数</a>，存放记录的<a href="https://baike.baidu.com/item/数组/3794097" target="_blank" rel="noopener">数组</a>叫做<a href="https://baike.baidu.com/item/散列表/10027933" target="_blank" rel="noopener">散列表</a>。</p>
<p>​        给定表H，存在函数hash(key)，对任意给定的关键字值key，代入函数后若能得到包含该关键字的记录在表中的地址，则称表H为<strong>哈希(Hash）表</strong>，函数hash(key)为<strong>哈希(Hash) 函数</strong>。</p>
<a id="more"></a>

<p>哈希函数考虑因素：计算哈希函数所需时间，关键字的长度，哈希表的大小，关键字的分布情况，记录的查找频率。</p>
<p>常用方法：</p>
<p><strong>直接定址法</strong>：直接以关键字k或者k加上某个常数（k+c）作为哈希地址。</p>
<p><strong>数字分析法</strong>：提取关键字中取值比较均匀的数字作为哈希地址。</p>
<p><strong>除留余数法</strong>：用关键字k除以某个不大于哈希表长度m的数p，将所得余数作为哈希表地址。</p>
<p><strong>分段叠加法</strong>：按照哈希表地址位数将关键字分成位数相等的几部分，其中最后一部分可以比较短。然后将这几部分相加，舍弃最高进位后的结果就是该关键字的哈希地址。</p>
<p><strong>平方取中法</strong>：如果关键字各个部分分布都不均匀的话，可以先求出它的平方值，然后按照需求取中间的几位作为哈希地址。</p>
<p><strong>伪随机数法</strong>：采用一个伪随机数当作哈希函数。</p>
<h3 id="二，关于哈希冲突：不同key值得到相同地址"><a href="#二，关于哈希冲突：不同key值得到相同地址" class="headerlink" title="二，关于哈希冲突：不同key值得到相同地址"></a>二，关于哈希冲突：不同key值得到相同地址</h3><p>解决办法：</p>
<ul>
<li>开放定址法：开放定址法就是一旦发生了冲突，就去寻找下一个空的散列地址，只要散列表足够大，空的散列地址总能找到，并将记录存入。</li>
<li><strong>链地址法</strong>：将哈希表的每个单元作为链表的头结点，所有哈希地址为i的元素构成一个同义词链表。即发生冲突时就把该关键字链在以该单元为头结点的链表的尾部。</li>
<li>再哈希法：当哈希地址发生冲突用其他的函数计算另一个哈希函数地址，直到冲突不再产生为止。</li>
<li>建立公共溢出区：将哈希表分为基本表和溢出表两部分，发生冲突的元素都放入溢出表中。</li>
</ul>
<h3 id="三，关于HashMap"><a href="#三，关于HashMap" class="headerlink" title="三，关于HashMap"></a>三，关于HashMap</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>​        基于哈希表的 Map 接口的实现。此实现提供所有可选的映射操作，并允许使用 null 值和 null 键。（除了不同步和允许使用 null 之外，HashMap 类与 Hashtable 大致相同。）此类不保证映射的顺序，特别是它不保证该顺序恒久不变。另外，HashMap是非线程安全的，也就是说在多线程的环境下，可能会存在问题，而Hashtable是线程安全的。</p>
<p>​        HashMap 的实例有两个参数影响其性能：初始容量 和加载因子。容量是<a href="https://baike.baidu.com/item/哈希表" target="_blank" rel="noopener">哈希表</a>中桶的数量，初始容量只是哈希表在创建时的容量。加载因子 是哈希表在其容量自动增加之前可以达到多满的一种尺度。当哈希表中的条目数超出了加载因子与当前容量的乘积时，则要对该哈希表进行 rehash 操作（即重建内部数据结构），从而哈希表将具有大约两倍的桶数。在Java中，加载因子默认值为0.75，默认初始容量为16 。</p>
<p>​        <strong>HashMap是线程不安全的，线程安全用ConcurrentHashMap</strong></p>
<h4 id="解决冲突方法"><a href="#解决冲突方法" class="headerlink" title="解决冲突方法"></a>解决冲突方法</h4><p>​        在Java中，保存数据有两种比较简单的数据结构：数组和链表。数组的特点是：寻址容易，插入和删除困难；而链表的特点是：寻址困难，插入和删除容易。上面我们提到过，常用的哈希函数的冲突解决办法中有一种方法叫做链地址法，其实就是将数组和链表组合在一起，发挥了两者的优势，我们可以将其理解为链表的数组。</p>
<p><img src="/2020/02/09/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93HashMap/hashtable.png" alt></p>
<h4 id="哈希函数"><a href="#哈希函数" class="headerlink" title="哈希函数"></a>哈希函数</h4><p>​        在Java 8 之前，HashMap和其他基于map的类都是通过链地址法解决冲突，它们使用单向链表来存储相同索引值的元素。在最坏的情况下，这种方式会将HashMap的get方法的性能从<code>O(1)</code>降低到<code>O(n)</code>。为了解决在频繁冲突时hashmap性能降低的问题，Java 8中使用平衡树来替代链表存储冲突的元素。这意味着我们可以将最坏情况下的性能从<code>O(n)</code>提高到<code>O(logn)</code>。</p>
<p>​        如果恶意程序知道我们用的是Hash算法，则在纯链表情况下，它能够发送大量请求导致哈希碰撞，然后不停访问这些key导致HashMap忙于进行线性查找，最终陷入瘫痪，即形成了拒绝服务攻击（DDoS）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;				<span class="comment">//JDK1.7</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;		<span class="comment">//JDK1.8</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> hash = (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="keyword">int</span> index = hash &amp; (tab.length-<span class="number">1</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">return</span> index;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>​        在JDK1.8的实现中，优化了高位运算的算法，通过hashCode()的高16位异或低16位实现的：(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)，主要是从速度、功效、质量来考虑的。以上方法得到的int的hash值，然后再通过<code>h &amp; (table.length -1)</code>来得到该对象在数据中保存的位置。</p>
<p>​        当链表长度大于等于8的时候将链表转换为红黑树，利用红黑树的特点(查找、插入、删除的时间复杂度最坏为O(logn))，可以提高HashMap的性能。当节点个数少于6个的时候，又会将红黑树转化为链表。</p>
<p><img src="/2020/02/09/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93HashMap/hashmap_jdk8.webp" alt></p>
<h3 id="四，开始"><a href="#四，开始" class="headerlink" title="四，开始"></a>四，开始</h3><h4 id="实现功能："><a href="#实现功能：" class="headerlink" title="实现功能："></a>实现功能：</h4><p>​        –添加数据，获取键对应值</p>
<h4 id="构建节点"><a href="#构建节点" class="headerlink" title="构建节点"></a>构建节点</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NodeC</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> hash;		<span class="comment">//hash值（存储位置）</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">final</span> K key;		<span class="comment">//键</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    V value;			<span class="comment">//值</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    NodeC&lt;K, V&gt; next;	<span class="comment">//下一节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    NodeC(<span class="keyword">int</span> hash, K key, V value, NodeC&lt;K, V&gt; next) &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.hash = hash;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.key = key;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.value = value;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.next = next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h4 id="构造HashMap"><a href="#构造HashMap" class="headerlink" title="构造HashMap"></a>构造HashMap</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMapC</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> size;						<span class="comment">//长度</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    NodeC&lt;K,V&gt; table[];				<span class="comment">//数组</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashMapC</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        table=<span class="keyword">new</span> NodeC[<span class="number">16</span>];		<span class="comment">//默认长度16（2的整数次幂）</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="哈希函数-1"><a href="#哈希函数-1" class="headerlink" title="哈希函数"></a>哈希函数</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;		<span class="comment">//JDK8同款</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> h;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> hash = (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> index = hash &amp; (table.length-<span class="number">1</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="comment">//System.out.println("hash值为："+index);</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">return</span> index;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h4 id="添加数据-put-K-k-V-v"><a href="#添加数据-put-K-k-V-v" class="headerlink" title="添加数据[put(K k,V v)]"></a>添加数据[put(K k,V v)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(K k,V v)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">int</span> h=hash(k);						<span class="comment">//计算哈希值</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        NodeC nc=<span class="keyword">new</span> NodeC(h,k,v,<span class="keyword">null</span>);		<span class="comment">//新建节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        NodeC temp=table[h];				<span class="comment">//找到该节点对应位置的链表</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        Boolean flag=<span class="keyword">false</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(temp==<span class="keyword">null</span>)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            table[h]=nc;					<span class="comment">//该链表暂时没有数据，将节点放入</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            size++;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">while</span> (temp!=<span class="keyword">null</span>)&#123;				<span class="comment">//遍历链表</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">                <span class="keyword">if</span>(temp.key==k)&#123;			<span class="comment">//发现同一个键，覆盖value值</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">                    temp.value=v;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                    flag=<span class="keyword">true</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                    <span class="keyword">break</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                <span class="keyword">if</span>(temp.next==<span class="keyword">null</span>)&#123;		<span class="comment">//没有下一个节点，结束遍历</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">                	<span class="keyword">break</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            	&#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                temp=temp.next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                temp.next=nc;				<span class="comment">//为新元素，加载表尾</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">                size++;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="获取key值对应的value值-get-K-k"><a href="#获取key值对应的value值-get-K-k" class="headerlink" title="获取key值对应的value值[get(K k)]"></a>获取key值对应的value值[get(K k)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">int</span> h=hash(key);						<span class="comment">//计算哈希值</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    NodeC&lt;K,V&gt; temp=table[h];				<span class="comment">//找到链表</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">while</span> (temp!=<span class="keyword">null</span>)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span> (temp.key==key) &#123;				<span class="comment">//找到键，返回值</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">return</span> temp.value;				</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        temp=temp.next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;							<span class="comment">//没找到，返回null</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h4 id="重写toString方法便于观察"><a href="#重写toString方法便于观察" class="headerlink" title="重写toString方法便于观察"></a>重写toString方法便于观察</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    StringBuilder result=<span class="keyword">new</span> StringBuilder(<span class="string">"&#123;"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;table.length;i++)&#123;			<span class="comment">//从第一个链表开始遍历</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(table[i]==<span class="keyword">null</span>)&#123;						<span class="comment">//跳过空节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">continue</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">while</span> (table[i]!=<span class="keyword">null</span>) &#123;			<span class="comment">//遍历链表所有节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">                result.append(table[i].key+<span class="string">" = "</span>+table[i].value+<span class="string">"，"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">                table[i]=table[i].next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">if</span>(!result.equals(<span class="string">"&#123;"</span>))&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        result.setCharAt(result.length()-<span class="number">1</span>,<span class="string">'&#125;'</span>);<span class="comment">//删除最后的逗号</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;<span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        result.append(<span class="string">"&#125;"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">return</span> result.toString();</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="五，测试方法"><a href="#五，测试方法" class="headerlink" title="五，测试方法"></a>五，测试方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    HashMapC&lt;Integer,String&gt; hmc=<span class="keyword">new</span> HashMapC&lt;&gt;();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">1</span>,<span class="string">"一"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">2</span>,<span class="string">"二"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">3</span>,<span class="string">"三"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">4</span>,<span class="keyword">null</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">17</span>,<span class="string">"十七"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">18</span>,<span class="string">"十八"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">33</span>,<span class="string">"三十三"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc.put(<span class="number">1</span>,<span class="string">"111"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc.get(<span class="number">1</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc.get(<span class="number">3</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc.get(<span class="number">18</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc.get(<span class="number">33</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(<span class="string">"end..."</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc.size);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    HashMapC&lt;String,Integer&gt; hmc2=<span class="keyword">new</span> HashMapC&lt;&gt;();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc2.put(<span class="string">"a"</span>,<span class="number">1</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc2.put(<span class="string">"b"</span>,<span class="number">2</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc2.put(<span class="string">"k"</span>,<span class="number">3</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    hmc2.put(<span class="string">"z"</span>,<span class="number">4</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc2.get(<span class="string">"a"</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc2.get(<span class="string">"b"</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc2.get(<span class="string">"k"</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc2.get(<span class="string">"z"</span>));</span></pre></td></tr><tr><td class="code"><pre><span class="line">    System.out.println(hmc2);</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p><img src="/2020/02/09/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93HashMap/hashmap_result.png" alt></p>
<h3 id="六，总结"><a href="#六，总结" class="headerlink" title="六，总结"></a>六，总结</h3><p>头发-1</p>
]]></content>
      <categories>
        <category>Java基础</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>哈希表</tag>
      </tags>
  </entry>
  <entry>
    <title>手写简易LinkedLsit</title>
    <url>/2020/02/08/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93LinkedLsit/</url>
    <content><![CDATA[<p>​        LinkedList属于List接口的实现类之一，与ArrayList不同之处是采用的存储结构不同，ArrayList的数据结构为线性表，而LinkedList数据结构是链表。链表数据结构的特点是每个元素分配的空间不必连续、插入和删除元素时速度非常快、但访问元素的速度较慢。LinkedList是一个双向链表, 当数据量很大或者操作很频繁的情况下，添加和删除元素时具有比ArrayList更好的性能。但在元素的查询和修改方面要弱于ArrayList。LinkedList类每个结点用内部类Node表示，LinkedList通过first和last引用分别指向链表的第一个和最后一个元素，当链表为空时，first和last都为NULL值。</p>
<a id="more"></a>

<h3 id="一，关于链表"><a href="#一，关于链表" class="headerlink" title="一，关于链表"></a>一，关于链表</h3><table>
<thead>
<tr>
<th>类型</th>
<th>包含节点</th>
<th>第一和最后节点指向</th>
</tr>
</thead>
<tbody><tr>
<td>单向链表</td>
<td>尾节点</td>
<td>尾的next=&gt;null</td>
</tr>
<tr>
<td>单向循环链表</td>
<td>尾节点</td>
<td>尾的next=&gt;头</td>
</tr>
<tr>
<td>双向链表</td>
<td>头，尾节点</td>
<td>每个节点头尾各自对应前后元素，first和last的prev/next对应null</td>
</tr>
<tr>
<td>双向循环链表</td>
<td>头，尾节点</td>
<td>last的next=&gt;first，first的next=&gt;last</td>
</tr>
</tbody></table>
<p><img src="/2020/02/08/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93LinkedLsit/single_list.webp" alt></p>
<p><img src="/2020/02/08/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93LinkedLsit/single_for_list.webp" alt></p>
<p><img src="/2020/02/08/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93LinkedLsit/double_list.webp" alt></p>
<p><img src="/2020/02/08/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93LinkedLsit/double_for_list.webp" alt></p>
<h3 id="二，关于LinkedList"><a href="#二，关于LinkedList" class="headerlink" title="二，关于LinkedList"></a>二，关于LinkedList</h3><p>LinkedList 是一个继承于AbstractSequentialList的<strong>双向循环链表</strong>。它也可以被当作堆栈、队列或双端队列进行操作。<br>LinkedList 实现 List 接口，能对它进行<strong>队列</strong>操作。<br>LinkedList 实现 Deque 接口，即能将LinkedList当作<strong>双端队列</strong>使用。<br>LinkedList 实现了Cloneable接口，即覆盖了函数clone()，能<strong>克隆</strong>。<br>LinkedList 实现java.io.Serializable接口，这意味着LinkedList支持<strong>序列化</strong>，能通过序列化去传输。<br>LinkedList 是<strong>非同步</strong>的。</p>
<h3 id="三，实现的功能"><a href="#三，实现的功能" class="headerlink" title="三，实现的功能"></a>三，实现的功能</h3><p>​        –尾部添加，索引查找，索引插入，索引修改，索引删除</p>
<h3 id="四，构建节点"><a href="#四，构建节点" class="headerlink" title="四，构建节点"></a>四，构建节点</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt;</span>&#123;		<span class="comment">//作为LinkedListC的内部类</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    Node&lt;E&gt; prev;	<span class="comment">//头节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    E data;			<span class="comment">//数据</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    Node&lt;E&gt; next;	<span class="comment">//尾节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(E e)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.data=e;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Node&lt;E&gt; prev, E data, Node&lt;E&gt; next)</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.prev = prev;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.data = data;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">this</span>.next = next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="五，构建LinkedList"><a href="#五，构建LinkedList" class="headerlink" title="五，构建LinkedList"></a>五，构建LinkedList</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListC</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size=<span class="number">0</span>;		<span class="comment">//链表长度</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">private</span> Node&lt;E&gt; first;	<span class="comment">//首部</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="keyword">private</span> Node&lt;E&gt; last;	<span class="comment">//尾部</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="meta">@Override</span>				<span class="comment">//重写toString方法，便于观察</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        StringBuilder llc=<span class="keyword">new</span> StringBuilder(<span class="string">"["</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            llc.append(first.data+<span class="string">","</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">            first=first.next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(size!=<span class="number">0</span>)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            llc.setCharAt(llc.length()-<span class="number">1</span>,<span class="string">']'</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            llc.append(<span class="string">"]"</span>);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">return</span> llc.toString();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="六，方法的编写"><a href="#六，方法的编写" class="headerlink" title="六，方法的编写"></a>六，方法的编写</h3><h4 id="获取索引所代表的节点-getNode-int-index"><a href="#获取索引所代表的节点-getNode-int-index" class="headerlink" title="获取索引所代表的节点[getNode(int index)]"></a>获取索引所代表的节点[getNode(int index)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;			<span class="comment">//分成了前后两部分，提高效率</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span>||index&gt;=size)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"索引越界："</span>+index);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(index&lt;=size/<span class="number">2</span>)&#123;				<span class="comment">//前半部分节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            Node node=first;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;index;i++)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                node=node.next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">return</span> node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span> &#123;							<span class="comment">//后半部分节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            Node node=last;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size-index-<span class="number">1</span>;i++)&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">                node=node.prev;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">return</span> node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="尾部添加-add-E-e"><a href="#尾部添加-add-E-e" class="headerlink" title="尾部添加[add(E,e)]"></a>尾部添加[add(E,e)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        Node&lt;E&gt; node=<span class="keyword">new</span> Node&lt;E&gt;(e);	<span class="comment">//新建节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(first==<span class="keyword">null</span>)&#123;				<span class="comment">//第一次添加，设置头尾</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            first=node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            last=node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span>&#123;							<span class="comment">//其他添加，尾部插入新节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            							<span class="comment">//并改变first的prev指向和last</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            last.next=node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node.prev=last;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node.next=first;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            last=node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            first.prev=last;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        size++;							<span class="comment">//长度+1</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="索引添加-insert-int-index-E-e"><a href="#索引添加-insert-int-index-E-e" class="headerlink" title="索引添加[insert(int index,E e)]"></a>索引添加[insert(int index,E e)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> index,E e)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        Node node=getNode(index);		<span class="comment">//获取索引的节点</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        Node newnode=<span class="keyword">new</span> Node(e);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(node.next!=<span class="keyword">null</span>) &#123;			</span></pre></td></tr><tr><td class="code"><pre><span class="line">            Node node_prev = node.prev;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            newnode.next = node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            newnode.prev = node_prev;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node_prev.next = newnode;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node.prev = newnode;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span> &#123;							<span class="comment">//只有一个节点的情况</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            newnode.prev=node;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node.next=newnode;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        size++;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(index==<span class="number">0</span>)&#123;					<span class="comment">//如果是第一个节点，将其设为first</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            first=newnode;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="索引查询-get-int-index"><a href="#索引查询-get-int-index" class="headerlink" title="索引查询[get(int index)]"></a>索引查询[get(int index)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">return</span> getNode(index).data.toString();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="索引修改-set-int-index"><a href="#索引修改-set-int-index" class="headerlink" title="索引修改[set(int index)]"></a>索引修改[set(int index)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> index,E e)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"即将将索引为"</span>+index+<span class="string">"的数改为"</span>+e);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        getNode(index).data=e;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h4 id="索引删除-remove-int-index"><a href="#索引删除-remove-int-index" class="headerlink" title="索引删除[remove(int index)]"></a>索引删除[remove(int index)]</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        Node node=getNode(index);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"要删除的索引是："</span>+index);</span></pre></td></tr><tr><td class="code"><pre><span class="line">        <span class="keyword">if</span>(node.next!=<span class="keyword">null</span>)&#123;				<span class="comment">//不止一个时</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            Node node_prev=node.prev;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            Node node_next=node.next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node_prev.next=node_next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            node_next.prev=node_prev;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            <span class="keyword">if</span>(index==<span class="number">0</span>)&#123;					<span class="comment">//第一个时，设置为first</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">                first=node_next;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span> &#123;								<span class="comment">//只有一个时，恢复出厂设置</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">            first=<span class="keyword">null</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">            last=<span class="keyword">null</span>;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        size--;								<span class="comment">//长度-1</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<h3 id="七，测试过程"><a href="#七，测试过程" class="headerlink" title="七，测试过程"></a>七，测试过程</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        LinkedListC&lt;Integer&gt; li= <span class="keyword">new</span> LinkedListC&lt;&gt;();</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(li.toString());<span class="comment">//检验toString方法，此时为空链表</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        li.add(<span class="number">1</span>);				<span class="comment">//添加一个1</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"执行add方法后："</span>+li.toString());</span></pre></td></tr><tr><td class="code"><pre><span class="line">        li.set(<span class="number">0</span>,<span class="number">9</span>);			<span class="comment">//将刚刚的1修改为9</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"执行set方法后："</span>+li.toString());</span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"执行get方法后："</span>+li.get(<span class="number">0</span>));	<span class="comment">//获取第一个</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        li.remove(<span class="number">0</span>);			<span class="comment">//移除那个1</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"执行remove方法后："</span>+li.toString());</span></pre></td></tr><tr><td class="code"><pre><span class="line">        li.insert(<span class="number">0</span>,<span class="number">5</span>);		<span class="comment">//在那个1的地方插入5(由于已经被移除，所以不存在0索引将抛出异常)</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">        System.out.println(<span class="string">"执行insert方法后："</span>+li.toString());</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2020/02/08/%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93LinkedLsit/test_result.png" alt></p>
<h3 id="八，总结"><a href="#八，总结" class="headerlink" title="八，总结"></a>八，总结</h3><p>头发-1</p>
]]></content>
      <categories>
        <category>Java基础</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>链表</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue+Axios综合练习(Cplayer播放器)</title>
    <url>/2020/02/07/Vue-Axios%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0-Cplayer%E6%92%AD%E6%94%BE%E5%99%A8/</url>
    <content><![CDATA[<h3 id="歌曲，评论，MV均来自网易云"><a href="#歌曲，评论，MV均来自网易云" class="headerlink" title="歌曲，评论，MV均来自网易云"></a>歌曲，评论，MV均来自网易云</h3><p><a href="/VueLearning/Cplayer.html">&gt;播放器点这里&lt;</a></p>
]]></content>
      <categories>
        <category>前端技术</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue+Axios小练习(记事本，城市天气查询)</title>
    <url>/2020/02/06/Vue-Axios%E5%B0%8F%E7%BB%83%E4%B9%A0-%E8%AE%B0%E4%BA%8B%E6%9C%AC%EF%BC%8C%E5%9F%8E%E5%B8%82%E5%A4%A9%E6%B0%94%E6%9F%A5%E8%AF%A2/</url>
    <content><![CDATA[<p><a href="/jishiben.html" target="ifr">&gt;记事本点这里&lt;</a></p>
<p><a href="/axios_learning.html" target="ifr">&gt;天气查询点这里&lt;</a>(该功能宣布GG，只能在本地用，那该死的http)</p>
<iframe src name="ifr" width="800px" height="336px" marginwidth="0" marginheight="0" frameborder="0" margin="0" style="background:pink;border-radius:5px;"></iframe>
]]></content>
      <categories>
        <category>前端技术</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue基础指令学习</title>
    <url>/2020/02/05/Vue%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p><a href="/VueLearning/vuejichu.html">&gt;具体网页点这里&lt;</a></p>
]]></content>
      <categories>
        <category>前端技术</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>一则随机笑话(每20s刷新)</title>
    <url>/2020/02/04/%E4%B8%80%E5%88%99%E9%9A%8F%E6%9C%BA%E7%AC%91%E8%AF%9D-%E6%AF%8F20s%E5%88%B7%E6%96%B0/</url>
    <content><![CDATA[<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript" src="/js/random-joke.js"></script>

<h4 id="joke" style="color:red">随机笑话在这显示，如果你一直都能看到这句话，说明我出BUG了

</h4>]]></content>
      <categories>
        <category>前端技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Boot入门</title>
    <url>/2020/01/07/Spring-Boot%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="个人见解"><a href="#个人见解" class="headerlink" title="个人见解"></a>个人见解</h2><p>​        对于一个刚学了9天，且仅仅了解一点点Spring，SpringMVC的人来说，Spring Boot是Spring和SpringMVC的自动配置版，容易上手，只需导入相关模块的启动器，就可以使用，免去了大量xml文件的配置，并且内嵌了Tomcat(默认)，Jetty，Undertow。省去了配tomcat的烦恼。spring boot大量使用注解的方式进行开发，也可以通过重写配置类修改默认配置，非常的便捷。并且spring boot可以整合其他优秀的框架和技术。</p>
<p>​        这9天使用spring boot 2.2.2版本进行学习，看了一些视频，看了一些博客，还翻了官方文档，算是有了一个初步的了解。</p>
<a id="more"></a>

<hr>
<h2 id="Spring-Boot初体验之Hello-World"><a href="#Spring-Boot初体验之Hello-World" class="headerlink" title="Spring Boot初体验之Hello World"></a>Spring Boot初体验之Hello World</h2><h4 id="Spring-Boot工程目录结构"><a href="#Spring-Boot工程目录结构" class="headerlink" title="Spring Boot工程目录结构"></a>Spring Boot工程目录结构</h4><p><img src="/2020/01/07/Spring-Boot%E5%85%A5%E9%97%A8/SB%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95.png" alt="SB工程目录"></p>
<h4 id="导入Web模块依赖"><a href="#导入Web模块依赖" class="headerlink" title="导入Web模块依赖"></a>导入Web模块依赖</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></pre></td></tr></table></figure>

<h4 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Controller</span></pre></td></tr><tr><td class="code"><pre><span class="line">public class HelloController &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">    @ResponseBody</span></pre></td></tr><tr><td class="code"><pre><span class="line">    @RequestMapping(&quot;&#x2F;hello&quot;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">    public String hello()&#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        return &quot;Hello World!&quot;;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h4 id="运行主程序"><a href="#运行主程序" class="headerlink" title="运行主程序"></a>运行主程序</h4><p><img src="/2020/01/07/Spring-Boot%E5%85%A5%E9%97%A8/%E4%B8%BB%E7%A8%8B%E5%BA%8F.png" alt></p>
<h4 id="控制台打印的日志信息"><a href="#控制台打印的日志信息" class="headerlink" title="控制台打印的日志信息"></a>控制台打印的日志信息</h4><p><img src="/2020/01/07/Spring-Boot%E5%85%A5%E9%97%A8/%E6%97%A5%E5%BF%97.png" alt></p>
<h4 id="浏览器访问8080端口发送hello请求"><a href="#浏览器访问8080端口发送hello请求" class="headerlink" title="浏览器访问8080端口发送hello请求"></a>浏览器访问8080端口发送hello请求</h4><p><img src="/2020/01/07/Spring-Boot%E5%85%A5%E9%97%A8/hello.png" alt></p>
<h4 id="第一步走出去了！！！"><a href="#第一步走出去了！！！" class="headerlink" title="第一步走出去了！！！"></a>第一步走出去了！！！</h4><h2 id="持续更新中。。。"><a href="#持续更新中。。。" class="headerlink" title="持续更新中。。。"></a>持续更新中。。。</h2>]]></content>
      <categories>
        <category>后端框架</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>第一次接触Mybatis</title>
    <url>/2019/12/11/%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%8E%A5%E8%A7%A6Mybatis/</url>
    <content><![CDATA[<!-- TOC -->

<ul>
<li><a href="#1工程目录">1.工程目录</a></li>
<li><a href="#2pornxml文件">2.porn.xml文件</a></li>
<li><a href="#3mybatis-configxml全局配置文件">3.mybatis-config.xml全局配置文件</a></li>
<li><a href="#4user类以及mysql中的user表">4.User类以及Mysql中的user表</a><ul>
<li><a href="#user类">User类</a></li>
<li><a href="#user表">user表</a></li>
</ul>
</li>
<li><a href="#5usermapperxml文件配置">5.UserMapper.xml文件配置</a></li>
<li><a href="#6编写测试类">6.编写测试类</a></li>
<li><a href="#7测试结果">7.测试结果</a></li>
<li><a href="#8感受">8.感受</a><ul>
<li><a href="#改革尚未成功同志仍需努力">改革尚未成功，同志仍需努力。</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<a id="more"></a>

<h2 id="工程目录"><a href="#工程目录" class="headerlink" title="工程目录"></a>工程目录</h2><h2 id><a href="#" class="headerlink" title></a><img src="/2019/12/11/%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%8E%A5%E8%A7%A6Mybatis/%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95.png" alt="工程目录"></h2><h2 id="porn-xml文件"><a href="#porn-xml文件" class="headerlink" title="porn.xml文件"></a>porn.xml文件</h2><pre><code>&lt;groupId&gt;com.study&lt;/groupId&gt;
&lt;artifactId&gt;LearnMybatis&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;packaging&gt;jar&lt;/packaging&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
        &lt;version&gt;3.5.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.17&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;log4j&lt;/groupId&gt;
        &lt;artifactId&gt;log4j&lt;/artifactId&gt;
        &lt;version&gt;1.2.12&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.13-rc-2&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre><hr>
<h2 id="mybatis-config-xml全局配置文件"><a href="#mybatis-config-xml全局配置文件" class="headerlink" title="mybatis-config.xml全局配置文件"></a>mybatis-config.xml全局配置文件</h2><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE configuration
    PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;

&lt;configuration&gt;
&lt;!-- 配置环境 --&gt;
    &lt;environments default=&quot;mysql&quot;&gt;
    &lt;!-- 配置mysql的环境--&gt;
        &lt;environment id=&quot;mysql&quot;&gt;
        &lt;!-- 配置事务的类型--&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;
            &lt;!-- 配置数据源（连接池） --&gt;
                &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;!-- 配置连接数据库的4个基本信息 --&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?    serverTimezone=UTC&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;!-- 指定映射配置文件的位置，映射配置文件指的是每个dao独立的配置文件 --&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/study/mapper/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;</code></pre><hr>
<h2 id="User类以及Mysql中的user表"><a href="#User类以及Mysql中的user表" class="headerlink" title="User类以及Mysql中的user表"></a>User类以及Mysql中的user表</h2><h3 id="User类"><a href="#User类" class="headerlink" title="User类"></a>User类</h3><p><img src="/2019/12/11/%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%8E%A5%E8%A7%A6Mybatis/User%E7%B1%BB.png" alt="User类"></p>
<h3 id="user表"><a href="#user表" class="headerlink" title="user表"></a>user表</h3><p><img src="/2019/12/11/%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%8E%A5%E8%A7%A6Mybatis/user%E8%A1%A8.png" alt="user表"></p>
<hr>
<h2 id="UserMapper-xml文件配置"><a href="#UserMapper-xml文件配置" class="headerlink" title="UserMapper.xml文件配置"></a>UserMapper.xml文件配置</h2><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;!DOCTYPE mapper
    PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.study.mapper.UserMapper&quot;&gt;
    &lt;select id=&quot;selectuser&quot; resultType=&quot;com.study.domain.User&quot;&gt;
        select * from user where id=#{id}
    &lt;/select&gt;
    &lt;select id=&quot;selectall&quot; resultType=&quot;com.study.domain.User&quot;&gt;
        select * from user
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre><hr>
<h2 id="编写测试类"><a href="#编写测试类" class="headerlink" title="编写测试类"></a>编写测试类</h2><pre><code>public class MybatisTest {

@Test
public static void main(String[] args) throws Exception{
    String resource=&quot;Mybatis-config.xml&quot;;
    InputStream in=Resources.getResourceAsStream(resource);
    SqlSessionFactory sqlsf=new SqlSessionFactoryBuilder().build(in);
    SqlSession os=sqlsf.openSession();
    try {
        //User u=os.selectOne(&quot;com.study.mapper.UserMapper.selectuser&quot;,1);
        List&lt;User&gt; ul=os.selectList(&quot;com.study.mapper.UserMapper.selectall&quot;);
        //System.out.println(u);
        for(User u:ul){
            System.out.println(u.getId()+&quot;,&quot;+u.getUsername()+&quot;\n&quot;);
        }
    }finally {
        os.close();
    }
}
}</code></pre><hr>
<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><p><img src="/2019/12/11/%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%8E%A5%E8%A7%A6Mybatis/%E7%BB%93%E6%9E%9C.png" alt="结果"></p>
<h2 id="感受"><a href="#感受" class="headerlink" title="感受"></a>感受</h2><p>   经过一番折腾，总算是把它弄出来了，在引用的时候要特别注意路径的问题，还有maven版本和mybatis版本也要注意，甚至时区问题都能有也是服了。mybatis类的属性名和表的字段名要一致。</p>
<h3 id="改革尚未成功，同志仍需努力。"><a href="#改革尚未成功，同志仍需努力。" class="headerlink" title="改革尚未成功，同志仍需努力。"></a>改革尚未成功，同志仍需努力。</h3>]]></content>
      <categories>
        <category>后端框架</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>更换主题</title>
    <url>/2019/12/09/%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98/</url>
    <content><![CDATA[<p>1 在E:\Hexo下用命令行安装：<br>    例如： git clone <a href="https://github.com/litten/hexo-theme-yilia.git" target="_blank" rel="noopener">https://github.com/litten/hexo-theme-yilia.git</a> themes/yilia<br>2 配置：修改Hexo文件夹下_config.yml文件的theme为新主题名字<br>3 hexo clean 和 hexo g<br>4 hexo d同步到服务器</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>发布文章</title>
    <url>/2019/12/09/%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<p>1 进入E:\Hexo目录<br>2 hexo new “文章标题”<br>3 在source/_posts下会生成.md文件<br>4 打开文件(Typora，VScode等软件)进行文章编写并保存<br>5 hexo clean清理<br>6 hexo g生成<br>7 hexo d同步到服务器</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2019/12/09/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><a id="more"></a>

<h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
</search>
